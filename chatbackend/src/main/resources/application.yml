spring:
  application:
    name: aichat-platform

  # DataSource Configuration - PostgreSQL
  datasource:
    url: jdbc:postgresql:///aichat_db
    username: postgres
    password: 
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000

  # JPA Configuration
  jpa:
    database: postgresql
    show-sql: false
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        use_sql_comments: true
        jdbc:
          time_zone: UTC

  # Redis Configuration
  data:
    redis:
      host: 
      port: 26739
      password: 
      database: 0
      timeout: 5000ms
      lettuce:
        pool:
          max-active: 20
          max-idle: 10
          min-idle: 5
          max-wait: 2000ms

    # Elasticsearch Configuration
    elasticsearch:
      uris: http://
      username: elastic
      password: 
      connection-timeout: 5s
      socket-timeout: 30s

# Elasticsearch开关（暂时禁用）
elasticsearch:
  enabled: false

  # RabbitMQ Configuration
  rabbitmq:
    host: 
    port: 5672
    username: rabbitmq
    password: 
    virtual-host: /
    listener:
      simple:
        acknowledge-mode: manual
        prefetch: 5
        retry:
          enabled: true
          max-attempts: 3
    publisher-confirm-type: correlated
    publisher-returns: true

  # Jackson Configuration
  jackson:
    time-zone: GMT+8
    date-format: yyyy-MM-dd HH:mm:ss
    serialization:
      write-dates-as-timestamps: false

server:
  port: 8080
  servlet:
    context-path: /api
    encoding:
      charset: UTF-8
      enabled: true
      force: true

# JWT Configuration
jwt:
  secret: 
  expiration: 36000000  # 10 hours in milliseconds
  refresh-expiration: 604800000  # 7 days in milliseconds

# DeepSeek API Configuration
deepseek:
  api:
    base-url: https://api.deepseek.com
    api-key: 
    model: deepseek-chat
    timeout: 60000
    max-retries: 3

qwen:
  api:
    base-url: https://dashscope.aliyuncs.com/compatible-mode/v1

zhipu:
  api:
    base-url: https://open.bigmodel.cn/api/paas/v4
    api-key: 

# HTTP 代理配置（如果网络无法直接访问 DeepSeek API）
http:
  proxy:
    enabled: false          # 是否启用代理，如需使用代理请改为 true
    host: 127.0.0.1         # 代理服务器地址（例如：127.0.0.1 或 localhost）
    port: 7890              # 代理端口（例如：7890, 1080, 8080 等）

# Tencent COS 配置
cos:
  client:
    host: wang-1311429185.cos.ap-shanghai.myqcloud.com
    secretId: 
    secretKey: 
    region: ap-shanghai
    bucket: wang-1311429185
# Pexels 图片搜索配置
pexels:
  api-key: 
# 阿里云 DashScope 配置
dashscope:
  api-key: 
  image-model: wan2.2-t2i-flash

# Application Configuration
app:
  # CORS Configuration
  cors:
    allowed-origins: http://localhost:5173,http://localhost:8081
    allowed-methods: GET,POST,PUT,DELETE,OPTIONS
    allowed-headers: "*"
    allow-credentials: true
    max-age: 3600

  # File Upload Configuration
  upload:
    max-file-size: 10MB
    max-request-size: 10MB
    temp-dir: /tmp/uploads

  # Vector Search Configuration
  vector:
    dimension: 1536  # DeepSeek embedding dimension
    top-k: 5
    use-simple-embedding: true  # 使用本地简单嵌入服务（不需要API调用）

  # Chat 默认最大输出 tokens（前端未传时使用）。可按需调整。
  chat:
    max-tokens-default: 3500

# Logging Configuration
logging:
  level:
    root: INFO
    com.aichat: DEBUG
    org.springframework.web: INFO
    org.springframework.security: INFO
    org.hibernate: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
  file:
    name: logs/aichat.log
    max-size: 10MB
    max-history: 30

# Management Endpoints
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: when-authorized



